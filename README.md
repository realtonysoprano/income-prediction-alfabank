# Hack&Change 2025
## Трек 3: Альфа-Банк
### **Команда:** Polar Express

### **Участники:**

Манташев Асадулла: ML/DA/BACKEND/FRONTEND

Латыпова Диана: SYSTEM ANALYSIS

Мантыпов Диас:

## Описание задачи
**Цель проекта:** построить систему, которая прогнозирует доход клиента банка на основе его транзакционной истории и других данных.
Прогноз используется для: 
- оценки кредитоспособности и настройки лимитов;
- подбора персональных продуктовых предложений;
- сегментации клиентской базы по уровню дохода и риску.
Основная метрика качества: взвешенная средняя абсолютная ошибка *WMAE*.

## Что реализовано / что нет
**Реализовано:**

- полный ML пайплайн в Jupyter (от EDA до финального обучения финальной модели с SHAP);
- сохранение обученных моделей и вспомогательных объектов;
- предобработочный модуль src/preprocessing.py;
- каркас backend сервиса на FastAPI (src/main.py) с ручками /predict, /what_if, /segments;
- фронтенд на Streamlit (src/app.py) с UI для сотрудника банка: выбор клиента, прогноз дохода, визуализация SHAP, рекомендации, сценарный анализ, дашборд сегментов.
  
**Не успел реализовать полностью:**

- интеграцию финальной ансамблевой модели в backend.
  
На этапе внедрения в API возникли технические сложности с версионированием и сериализацией артефактов, поэтому текущая версия FastAPI и веб-сервиса работает с синтетическими данными, но отражает целевой функционал интерфейса и формат ответов.

## Инструкция по запуску:

1. Клонирование репозитория
```bash
git clone https://github.com/realtonysoprano/income-prediction-alfabank.git
cd income-prediction-alfabank
```
2. Создание и активация виртуального окружения (по желанию)
```bash
python -m venv .venv
.venv\Scripts\activate
```
3. Установка зависимостей
```bash
pip install -r requirements.txt
```
4. Запуск FastAPI backend
```bash
cd src
uvicorn main:app --host 0.0.0.0 --port 8000 --reload
```
открыть в браузере http://localhost:8000/docs

5. Запуск Streamlit frontend
    
находясь в src выполнить:
```bash
streamlit run app.py
```
открыть в браузере http://localhost:8501 , отобразится веб интерфейс.	


## Структура проекта
**Корень репозитория:**

**data/**
-	исходные и производные данные (train/test, X_test_final, parquet/CSV и служебные файлы);
  
**logs/**
-	логи работы сервисов;
  
**models/**
-	финальные ML артефакты, в том числе final_3models.pkl (ансамбль + SHAP explainer);
  
**notebooks/**
-	model_income_pipeline_v2.ipynb - основной ноутбук с анализом данных, построением фич и финального ансамбля;
-	upgraded_model_income_v2.ipynb - дополнительные эксперименты по улучшению прогноза;
  
**src/**
-	main.py - FastAPI backend (текущая версия с заглушками);
-	app.py - Streamlit интерфейс для сотрудников банка;
-	model.py  - класс для интеграции ансамблевой модели в backend (каркас, ждет доработки);
-	preprocessing.py - предобработка данных и функции подготовки одного клиента к инференсу;
-	recommendations.py - генерация текстовых рекомендаций по продуктам на основе дохода, сегмента и SHAP факторов;
-	segment.py - логика кластеризации клиентов и формирования сегментов/дашбордов;
-	logging_config.py - конфигурация логирования приложения;
  
README.md - описание проекта и инструкция по запуску;

report.pdf - отчет о реализации FastAPI и Streamlit

requirements.txt - список зависимостей;


